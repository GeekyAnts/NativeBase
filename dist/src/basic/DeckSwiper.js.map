{"version":3,"sources":["../../../src/basic/DeckSwiper.js"],"names":["SWIPE_THRESHOLD","DeckSwiper","props","state","pan","ValueXY","pan2","enter","Value","selectedItem","dataSource","selectedItem2","card1Top","card2Top","fadeAnim","looping","disabled","length","lastCard","setState","undefined","visibleIndex","indexOf","currentIndex","nextIndex","topCard","position","top","right","left","newIdx","newIdx2","setTimeout","nextIndexes","findNextIndexes","onSwiping","timing","toValue","start","spring","friction","selectNext","decay","velocity","x","y","deceleration","_resetState","bind","_panResponder","create","onMoveShouldSetResponderCapture","onMoveShouldSetPanResponderCapture","evt","gestureState","Math","abs","dx","onPanResponderGrant","e","setOffset","_value","setValue","onPanResponderMove","val","opa","event","onPanResponderRelease","vx","vy","onSwipeRight","onSwipeLeft","translateX","translateY","rotate","interpolate","inputRange","outputRange","opacity","scale","animatedCardStyles","transform","animatedCardStyles2","flexDirection","renderEmpty","getCardStyles","getInitialStyle","panHandlers","renderItem","renderBottom","renderTop","propTypes","style","oneOfType","object","number","array","StyledDeckSwiper"],"mappings":"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","file":"DeckSwiper.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { View, Animated, PanResponder } from \"react-native\";\r\nimport clamp from \"clamp\";\r\nimport { connectStyle } from \"native-base-shoutem-theme\";\r\nimport mapPropsToStyleNames from \"../Utils/mapPropsToStyleNames\";\r\nimport { ViewPropTypes } from '../Utils';\r\n\r\nconst SWIPE_THRESHOLD = 120;\r\n\r\nclass DeckSwiper extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tpan: new Animated.ValueXY(),\r\n\t\t\tpan2: new Animated.ValueXY(),\r\n\t\t\tenter: new Animated.Value(0.8),\r\n\t\t\tselectedItem: this.props.dataSource[0],\r\n\t\t\tselectedItem2: this.props.dataSource[1],\r\n\t\t\tcard1Top: true,\r\n\t\t\tcard2Top: false,\r\n\t\t\tfadeAnim: new Animated.Value(0.8),\r\n\t\t\tlooping: typeof this.props.looping === \"undefined\" ? true : this.props.looping,\r\n\t\t\tdisabled: this.props.dataSource.length === 0,\r\n\t\t\tlastCard: this.props.dataSource.length === 1,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillReceiveProps({ dataSource }) {\r\n\t\tif (dataSource.length !== this.props.dataSource.length) {\r\n\t\t\tif (dataSource.length <= 1) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\t...this.state,\r\n\t\t\t\t\tselectedItem: dataSource[0],\r\n\t\t\t\t\tselectedItem2: undefined,\r\n\t\t\t\t\tdisabled: dataSource.length === 0,\r\n\t\t\t\t\tlastCard: dataSource.length === 1,\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst visibleIndex = dataSource.indexOf(this.state.selectedItem);\r\n\t\t\tconst currentIndex = visibleIndex < 0 ? visibleIndex + 1 : visibleIndex;\r\n\t\t\tconst nextIndex = currentIndex + 1 === dataSource.length ? 0 : currentIndex + 1;\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedItem: dataSource[currentIndex],\r\n\t\t\t\tselectedItem2: dataSource[nextIndex],\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tgetInitialStyle() {\r\n\t\treturn {\r\n\t\t\ttopCard: {\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tfindNextIndexes(currentIndex) {\r\n\t\tconst newIdx = currentIndex + 1;\r\n\t\tconst newIdx2 = currentIndex + 2;\r\n\r\n\t\tif (newIdx2 > this.props.dataSource.length - 1 && newIdx === this.props.dataSource.length - 1) {\r\n\t\t\treturn [newIdx, 0];\r\n\t\t} else if (newIdx > this.props.dataSource.length - 1) {\r\n\t\t\treturn [0, 1];\r\n\t\t}\r\n\t\treturn [newIdx, newIdx2];\r\n\t}\r\n\r\n\tselectNext() {\r\n\t\tconst dataSource = this.props.dataSource;\r\n\t\tconst currentIndex = dataSource.indexOf(this.state.selectedItem);\r\n\r\n\t\t// if not looping, check for these conditionals and if true return from selectNext()\r\n\t\tif (!this.state.looping) {\r\n\t\t\t// reached end -> only display static renderEmpty() -> no swiping\r\n\t\t\tif (currentIndex === dataSource.length - 1) {\r\n\t\t\t\treturn this.setState({\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t});\r\n\t\t\t} else if (currentIndex === dataSource.length - 2) {\r\n\t\t\t\t// show last card with renderEmpty() component behind it\r\n\t\t\t\treturn setTimeout(() => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tselectedItem: dataSource[currentIndex + 1],\r\n\t\t\t\t\t});\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tlastCard: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 350);\r\n\t\t\t\t}, 50);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst nextIndexes = this.findNextIndexes(currentIndex);\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedItem: this.props.dataSource[nextIndexes[0]],\r\n\t\t\t});\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tselectedItem2: this.props.dataSource[nextIndexes[1]],\r\n\t\t\t\t});\r\n\t\t\t}, 350);\r\n\t\t}, 50);\r\n\t}\r\n\r\n\tswipeRight() {\r\n\t\tif (this.props.onSwiping) this.props.onSwiping(\"right\");\r\n\t\tsetTimeout(() => {\r\n\t\t\tAnimated.timing(this.state.fadeAnim, { toValue: 1 }).start();\r\n\t\t\tAnimated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\r\n\t\t\tthis.selectNext();\r\n\t\t\tAnimated.decay(this.state.pan, {\r\n\t\t\t\tvelocity: { x: 8, y: 1 },\r\n\t\t\t\tdeceleration: 0.98,\r\n\t\t\t}).start(this._resetState.bind(this));\r\n\t\t}, 300);\r\n\t}\r\n\r\n\tswipeLeft() {\r\n\t\tif (this.props.onSwiping) this.props.onSwiping(\"left\");\r\n\t\tsetTimeout(() => {\r\n\t\t\tAnimated.timing(this.state.fadeAnim, { toValue: 1 }).start();\r\n\t\t\tAnimated.spring(this.state.enter, { toValue: 1, friction: 7 }).start();\r\n\t\t\tthis.selectNext();\r\n\t\t\tAnimated.decay(this.state.pan, {\r\n\t\t\t\tvelocity: { x: -8, y: 1 },\r\n\t\t\t\tdeceleration: 0.98,\r\n\t\t\t}).start(this._resetState.bind(this));\r\n\t\t}, 300);\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis._panResponder = PanResponder.create({\r\n\t\t\tonMoveShouldSetResponderCapture: () => true,\r\n\t\t\tonMoveShouldSetPanResponderCapture: (evt, gestureState) => Math.abs(gestureState.dx) > 5,\r\n\r\n\t\t\tonPanResponderGrant: (e, gestureState) => {\r\n\t\t\t\tthis.state.pan.setOffset({\r\n\t\t\t\t\tx: this.state.pan.x._value,\r\n\t\t\t\t\ty: this.state.pan.y._value,\r\n\t\t\t\t});\r\n\t\t\t\tthis.state.pan.setValue({ x: 0, y: 0 });\r\n\t\t\t},\r\n\r\n\t\t\tonPanResponderMove: (e, gestureState) => {\r\n\t\t\t\tif (gestureState.dx > 20) {\r\n\t\t\t\t\tif (this.props.onSwiping) this.props.onSwiping(\"right\", gestureState.dx);\r\n\t\t\t\t} else if (gestureState.dx < -20) {\r\n\t\t\t\t\tif (this.props.onSwiping) this.props.onSwiping(\"left\", gestureState.dx);\r\n\t\t\t\t}\r\n\t\t\t\tlet val = Math.abs(gestureState.dx * 0.0013);\r\n\t\t\t\tconst opa = Math.abs(gestureState.dx * 0.0022);\r\n\t\t\t\tif (val > 0.2) {\r\n\t\t\t\t\tval = 0.2;\r\n\t\t\t\t}\r\n\t\t\t\tAnimated.timing(this.state.fadeAnim, { toValue: 0.8 + val }).start();\r\n\t\t\t\tAnimated.spring(this.state.enter, {\r\n\t\t\t\t\ttoValue: 0.8 + val,\r\n\t\t\t\t\tfriction: 7,\r\n\t\t\t\t}).start();\r\n\t\t\t\tAnimated.event([null, { dx: this.state.pan.x }])(e, gestureState);\r\n\t\t\t},\r\n\r\n\t\t\tonPanResponderRelease: (e, { vx, vy }) => {\r\n\t\t\t\tif (this.props.onSwiping) this.props.onSwiping(null);\r\n\t\t\t\tlet velocity;\r\n\r\n\t\t\t\tif (vx >= 0) {\r\n\t\t\t\t\tvelocity = clamp(vx, 4.5, 10);\r\n\t\t\t\t} else if (vx < 0) {\r\n\t\t\t\t\tvelocity = clamp(vx * -1, 4.5, 10) * -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (Math.abs(this.state.pan.x._value) > SWIPE_THRESHOLD) {\r\n\t\t\t\t\tif (velocity > 0) {\r\n\t\t\t\t\t\tthis.props.onSwipeRight ? this.props.onSwipeRight(this.state.selectedItem) : undefined;\r\n\t\t\t\t\t\tthis.selectNext();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.props.onSwipeLeft ? this.props.onSwipeLeft(this.state.selectedItem) : undefined;\r\n\t\t\t\t\t\tthis.selectNext();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tAnimated.decay(this.state.pan, {\r\n\t\t\t\t\t\tvelocity: { x: velocity, y: vy },\r\n\t\t\t\t\t\tdeceleration: 0.98,\r\n\t\t\t\t\t}).start(this._resetState.bind(this));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tAnimated.spring(this.state.pan, {\r\n\t\t\t\t\t\ttoValue: { x: 0, y: 0 },\r\n\t\t\t\t\t\tfriction: 4,\r\n\t\t\t\t\t}).start();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\t_resetState() {\r\n\t\tthis.state.pan.setValue({ x: 0, y: 0 });\r\n\t\tthis.state.enter.setValue(0.8);\r\n\t\tthis.state.fadeAnim.setValue(0.8);\r\n\t\tthis.setState({\r\n\t\t\tcard1Top: !this.state.card1Top,\r\n\t\t\tcard2Top: !this.state.card2Top,\r\n\t\t});\r\n\t\tif (this.props.onSwiping) this.props.onSwiping(null);\r\n\t}\r\n\r\n\tgetCardStyles() {\r\n\t\tconst { pan, pan2, enter } = this.state;\r\n\r\n\t\tconst [translateX, translateY] = [pan.x, pan.y];\r\n\t\t// let [translateX, translateY] = [pan2.x, pan2.y];\r\n\r\n\t\tconst rotate = pan.x.interpolate({\r\n\t\t\tinputRange: [-700, 0, 700],\r\n\t\t\toutputRange: [\"-10deg\", \"0deg\", \"10deg\"],\r\n\t\t});\r\n\r\n\t\tconst opacity = pan.x.interpolate({\r\n\t\t\tinputRange: [-320, 0, 320],\r\n\t\t\toutputRange: [0.9, 1, 0.9],\r\n\t\t});\r\n\t\tconst scale = enter;\r\n\r\n\t\tconst animatedCardStyles = {\r\n\t\t\ttransform: [{ translateX }, { translateY }, { rotate }],\r\n\t\t\topacity,\r\n\t\t};\r\n\t\tconst animatedCardStyles2 = { transform: [{ scale }] };\r\n\r\n\t\treturn [animatedCardStyles, animatedCardStyles2];\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.disabled) {\r\n\t\t\t// disable swiping and renderEmpty\r\n\t\t\treturn (\r\n\t\t\t\t<View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<View>\r\n\t\t\t\t\t\t\t{this.props.renderEmpty && this.props.renderEmpty()}\r\n\t\t\t\t\t\t</View>\r\n\t\t\t\t\t}\r\n\t\t\t\t</View>\r\n\t\t\t);\r\n\t\t} else if (this.state.lastCard) {\r\n\t\t\t// display renderEmpty underneath last viable card\r\n\t\t\treturn (\r\n\t\t\t\t<View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n\t\t\t\t\t{this.state.selectedItem === undefined\r\n\t\t\t\t\t\t? <View />\r\n\t\t\t\t\t\t: <View>\r\n\t\t\t\t\t\t\t\t<Animated.View\r\n\t\t\t\t\t\t\t\t\tstyle={[\r\n\t\t\t\t\t\t\t\t\t\tthis.getCardStyles()[1],\r\n\t\t\t\t\t\t\t\t\t\tthis.getInitialStyle().topCard,\r\n\t\t\t\t\t\t\t\t\t\t{ opacity: this.state.fadeAnim },\r\n\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t{...this._panResponder.panHandlers}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.props.renderEmpty && this.props.renderEmpty()}\r\n\t\t\t\t\t\t\t\t</Animated.View>\r\n\t\t\t\t\t\t\t\t<Animated.View\r\n\t\t\t\t\t\t\t\t\tstyle={[this.getCardStyles()[0], this.getInitialStyle().topCard]}\r\n\t\t\t\t\t\t\t\t\t{...this._panResponder.panHandlers}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{this.props.renderItem(this.state.selectedItem)}\r\n\t\t\t\t\t\t\t\t</Animated.View>\r\n\t\t\t\t\t\t\t</View>}\r\n\t\t\t\t</View>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<View style={{ position: \"relative\", flexDirection: \"column\" }}>\r\n\t\t\t\t{this.state.selectedItem === undefined\r\n\t\t\t\t\t? <View />\r\n\t\t\t\t\t: <View>\r\n\t\t\t\t\t\t\t<Animated.View\r\n\t\t\t\t\t\t\t\tstyle={[\r\n\t\t\t\t\t\t\t\t\tthis.getCardStyles()[1],\r\n\t\t\t\t\t\t\t\t\tthis.getInitialStyle().topCard,\r\n\t\t\t\t\t\t\t\t\t{ opacity: this.state.fadeAnim },\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t{...this._panResponder.panHandlers}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.props.renderBottom\r\n\t\t\t\t\t\t\t\t\t? this.props.renderBottom(this.state.selectedItem2)\r\n\t\t\t\t\t\t\t\t\t: this.props.renderItem(this.state.selectedItem2)}\r\n\t\t\t\t\t\t\t</Animated.View>\r\n\t\t\t\t\t\t\t<Animated.View\r\n\t\t\t\t\t\t\t\tstyle={[this.getCardStyles()[0], this.getInitialStyle().topCard]}\r\n\t\t\t\t\t\t\t\t{...this._panResponder.panHandlers}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.props.renderTop\r\n\t\t\t\t\t\t\t\t\t? this.props.renderTop(this.state.selectedItem)\r\n\t\t\t\t\t\t\t\t\t: this.props.renderItem(this.state.selectedItem)}\r\n\t\t\t\t\t\t\t</Animated.View>\r\n\t\t\t\t\t\t</View>}\r\n\t\t\t</View>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nDeckSwiper.propTypes = {\r\n\t...ViewPropTypes,\r\n\tstyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\r\n\tdataSource: PropTypes.array,\r\n};\r\n\r\nconst StyledDeckSwiper = connectStyle(\"NativeBase.DeckSwiper\", {}, mapPropsToStyleNames)(DeckSwiper);\r\n\r\nexport { StyledDeckSwiper as DeckSwiper };\r\n"]}