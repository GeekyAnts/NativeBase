{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","Platform","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","mixins","statics","propTypes","tabBarPosition","PropTypes","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","ViewPropTypes","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","state","setValue","InteractionManager","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","scrollTo","x","y","animated","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","offsetX","e","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","_","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","tabContainerStyle","left","right","styles","container","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["import PropTypes from \"prop-types\";\r\nimport createReactClass from \"create-react-class\";\r\nimport _ from \"lodash\";\r\nimport { InteractionManager, ViewPropTypes } from \"../../utils\";\r\nconst React = require(\"react\");\r\nconst { Component } = React;\r\nconst ReactNative = require(\"react-native\");\r\nconst {\r\n  Dimensions,\r\n  View,\r\n  Animated,\r\n  ScrollView,\r\n  StyleSheet,\r\n  Platform\r\n} = ReactNative;\r\nconst TimerMixin = require(\"react-timer-mixin\");\r\n\r\nconst SceneComponent = require(\"./SceneComponent\");\r\nconst { DefaultTabBar } = require(\"./DefaultTabBar\");\r\nconst { ScrollableTabBar } = require(\"./ScrollableTabBar\");\r\n\r\nconst ScrollableTabView = createReactClass({\r\n  mixins: [TimerMixin],\r\n  statics: {\r\n    DefaultTabBar,\r\n    ScrollableTabBar\r\n  },\r\n\r\n  propTypes: {\r\n    tabBarPosition: PropTypes.oneOf([\r\n      \"top\",\r\n      \"bottom\",\r\n      \"overlayTop\",\r\n      \"overlayBottom\"\r\n    ]),\r\n    initialPage: PropTypes.number,\r\n    page: PropTypes.number,\r\n    onChangeTab: PropTypes.func,\r\n    onScroll: PropTypes.func,\r\n    renderTabBar: PropTypes.any,\r\n    style: ViewPropTypes.style,\r\n    contentProps: PropTypes.object,\r\n    scrollWithoutAnimation: PropTypes.bool,\r\n    locked: PropTypes.bool,\r\n    prerenderingSiblingsNumber: PropTypes.number\r\n  },\r\n\r\n  getDefaultProps() {\r\n    return {\r\n      tabBarPosition: \"top\",\r\n      initialPage: 0,\r\n      page: -1,\r\n      onChangeTab: () => {},\r\n      onScroll: () => {},\r\n      contentProps: {},\r\n      scrollWithoutAnimation: false,\r\n      locked: false,\r\n      prerenderingSiblingsNumber: 0\r\n    };\r\n  },\r\n\r\n  getInitialState() {\r\n    return {\r\n      currentPage: this.props.initialPage,\r\n      scrollValue: new Animated.Value(this.props.initialPage),\r\n      containerWidth: Dimensions.get(\"window\").width,\r\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage })\r\n    };\r\n  },\r\n\r\n  componentDidMount() {\r\n    const scrollFn = () => {\r\n      if (this.scrollView) {\r\n        this.state.scrollValue.setValue(this.props.initialPage);\r\n      }\r\n    };\r\n    InteractionManager.runAfterInteractions(scrollFn);\r\n  },\r\n\r\n  componentWillReceiveProps(props) {\r\n    if (props.children !== this.props.children) {\r\n      this.updateSceneKeys({\r\n        page: this.state.currentPage,\r\n        children: props.children\r\n      });\r\n    }\r\n\r\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\r\n      this.goToPage(props.page);\r\n    }\r\n  },\r\n\r\n  goToPage(pageNumber) {\r\n    const offset = pageNumber * this.state.containerWidth;\r\n    if (this.scrollView) {\r\n      this.scrollView.scrollTo({\r\n        x: offset,\r\n        y: 0,\r\n        animated: !this.props.scrollWithoutAnimation\r\n      });\r\n    }\r\n\r\n    const currentPage = this.state.currentPage;\r\n    this.updateSceneKeys({\r\n      page: pageNumber,\r\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber)\r\n    });\r\n  },\r\n\r\n  renderTabBar(props) {\r\n    if (this.props.renderTabBar === false) {\r\n      return null;\r\n    } else if (this.props.renderTabBar) {\r\n      return React.cloneElement(this.props.renderTabBar(props), props);\r\n    } else {\r\n      return <DefaultTabBar {...props} />;\r\n    }\r\n  },\r\n\r\n  updateSceneKeys({\r\n    page,\r\n    children = this.props.children,\r\n    callback = () => {}\r\n  }) {\r\n    let newKeys = this.newSceneKeys({\r\n      previousKeys: this.state.sceneKeys,\r\n      currentPage: page,\r\n      children\r\n    });\r\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\r\n  },\r\n\r\n  newSceneKeys({\r\n    previousKeys = [],\r\n    currentPage = 0,\r\n    children = this.props.children\r\n  }) {\r\n    let newKeys = [];\r\n    this._children(children).forEach((child, idx) => {\r\n      let key = this._makeSceneKey(child, idx);\r\n      if (\r\n        this._keyExists(previousKeys, key) ||\r\n        this._shouldRenderSceneKey(idx, currentPage)\r\n      ) {\r\n        newKeys.push(key);\r\n      }\r\n    });\r\n    return newKeys;\r\n  },\r\n\r\n  _shouldRenderSceneKey(idx, currentPageKey) {\r\n    let numOfSibling = this.props.prerenderingSiblingsNumber;\r\n    return (\r\n      idx < currentPageKey + numOfSibling + 1 &&\r\n      idx > currentPageKey - numOfSibling - 1\r\n    );\r\n  },\r\n\r\n  _keyExists(sceneKeys, key) {\r\n    return sceneKeys.find(sceneKey => key === sceneKey);\r\n  },\r\n\r\n  _makeSceneKey(child, idx) {\r\n    return child.props.heading + \"_\" + idx;\r\n  },\r\n\r\n  renderScrollableContent() {\r\n    const scenes = this._composeScenes();\r\n    return (\r\n      <ScrollView\r\n        horizontal\r\n        pagingEnabled\r\n        automaticallyAdjustContentInsets={false}\r\n        keyboardShouldPersistTaps=\"handled\"\r\n        contentOffset={{\r\n          x: this.props.initialPage * this.state.containerWidth\r\n        }}\r\n        ref={scrollView => {\r\n          this.scrollView = scrollView;\r\n        }}\r\n        onScroll={e => {\r\n          const offsetX = e.nativeEvent.contentOffset.x;\r\n          this._updateScrollValue(offsetX / this.state.containerWidth);\r\n        }}\r\n        onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\r\n        onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\r\n        scrollEventThrottle={16}\r\n        scrollsToTop={false}\r\n        showsHorizontalScrollIndicator={false}\r\n        scrollEnabled={!this.props.locked}\r\n        directionalLockEnabled\r\n        alwaysBounceVertical={false}\r\n        keyboardDismissMode=\"on-drag\"\r\n        {...this.props.contentProps}\r\n      >\r\n        {scenes}\r\n      </ScrollView>\r\n    );\r\n  },\r\n\r\n  _composeScenes() {\r\n    return this._children().map((child, idx) => {\r\n      let key = this._makeSceneKey(child, idx);\r\n      return (\r\n        <SceneComponent\r\n          key={child.key}\r\n          shouldUpdated={this._shouldRenderSceneKey(\r\n            idx,\r\n            this.state.currentPage\r\n          )}\r\n          style={{ width: this.state.containerWidth }}\r\n        >\r\n          {this._keyExists(this.state.sceneKeys, key) ? (\r\n            child\r\n          ) : (\r\n            <View heading={child.props.heading} />\r\n          )}\r\n        </SceneComponent>\r\n      );\r\n    });\r\n  },\r\n\r\n  _onMomentumScrollBeginAndEnd(e) {\r\n    const offsetX = e.nativeEvent.contentOffset.x;\r\n    const page = Math.round(offsetX / this.state.containerWidth);\r\n    if (this.state.currentPage !== page) {\r\n      this._updateSelectedPage(page);\r\n    }\r\n  },\r\n\r\n  _updateSelectedPage(nextPage) {\r\n    let localNextPage = nextPage;\r\n    if (typeof localNextPage === \"object\") {\r\n      localNextPage = nextPage.nativeEvent.position;\r\n    }\r\n\r\n    const currentPage = this.state.currentPage;\r\n    this.updateSceneKeys({\r\n      page: localNextPage,\r\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage)\r\n    });\r\n  },\r\n\r\n  _onChangeTab(prevPage, currentPage) {\r\n    this.props.onChangeTab({\r\n      i: currentPage,\r\n      ref: this._children()[currentPage],\r\n      from: prevPage\r\n    });\r\n  },\r\n\r\n  _updateScrollValue(value) {\r\n    this.state.scrollValue.setValue(value);\r\n    this.props.onScroll(value);\r\n  },\r\n\r\n  _handleLayout(e) {\r\n    const { width } = e.nativeEvent.layout;\r\n\r\n    if (Math.round(width) !== Math.round(this.state.containerWidth)) {\r\n      this.setState({ containerWidth: width });\r\n      this.requestAnimationFrame(() => {\r\n        this.goToPage(this.state.currentPage);\r\n      });\r\n    }\r\n  },\r\n\r\n  _children(children = this.props.children) {\r\n    return React.Children.map(children, child => child);\r\n  },\r\n\r\n  render() {\r\n    let overlayTabs =\r\n      this.props.tabBarPosition === \"overlayTop\" ||\r\n      this.props.tabBarPosition === \"overlayBottom\";\r\n    let tabBarProps = {\r\n      goToPage: this.goToPage,\r\n      tabs: this._children().map(child => child.props.heading),\r\n      tabStyle: this._children().map(child => child.props.tabStyle),\r\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\r\n      textStyle: this._children().map(child => child.props.textStyle),\r\n      activeTextStyle: this._children().map(\r\n        child => child.props.activeTextStyle\r\n      ),\r\n      tabHeaderStyle: this._children().map(child =>\r\n        _.get(child.props.heading.props, \"style\", undefined)\r\n      ),\r\n      activeTab: this.state.currentPage,\r\n      scrollValue: this.state.scrollValue,\r\n      containerWidth: this.state.containerWidth\r\n    };\r\n\r\n    if (this.props.tabBarBackgroundColor) {\r\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\r\n    }\r\n    if (this.props.tabBarActiveTextColor) {\r\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\r\n    }\r\n    if (this.props.tabBarInactiveTextColor) {\r\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\r\n    }\r\n    if (this.props.tabBarTextStyle) {\r\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\r\n    }\r\n    if (this.props.tabBarUnderlineStyle) {\r\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\r\n    }\r\n    if (this.props.tabContainerStyle) {\r\n      tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\r\n    }\r\n    if (overlayTabs) {\r\n      tabBarProps.style = {\r\n        position: \"absolute\",\r\n        left: 0,\r\n        right: 0,\r\n        [this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0,\r\n        backgroundColor: \"rgba(255, 255, 255, 0.7)\"\r\n      };\r\n    }\r\n\r\n    return (\r\n      <View\r\n        style={[styles.container, this.props.style]}\r\n        onLayout={this._handleLayout}\r\n      >\r\n        {(this.props.tabBarPosition === \"top\" ||\r\n          this.props.tabBarPosition === \"overlayTop\") &&\r\n          this.renderTabBar(tabBarProps)}\r\n        {this.renderScrollableContent()}\r\n        {(this.props.tabBarPosition === \"bottom\" ||\r\n          this.props.tabBarPosition === \"overlayBottom\") &&\r\n          this.renderTabBar(tabBarProps)}\r\n      </View>\r\n    );\r\n  }\r\n});\r\n\r\nexport default ScrollableTabView;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1\r\n  },\r\n  scrollableContentAndroid: {\r\n    flex: 1\r\n  }\r\n});\r\n"]}