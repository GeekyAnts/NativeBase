{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","Platform","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","mixins","statics","propTypes","tabBarPosition","PropTypes","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","ViewPropTypes","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","gotNextPage","isClicked","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","state","setValue","InteractionManager","runAfterInteractions","setTimeout","scrollTo","x","animated","UNSAFE_componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","setState","y","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","_optimisticRender","_onMomentumScrollBeginAndEnd","map","e","offsetX","nativeEvent","contentOffset","Math","round","_updateSelectedPage","currentPageOffset","deltaX","abs","nextPage","_updateScrollValue","localNextPage","position","prevPage","i","ref","from","value","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","_","undefined","disabled","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","tabContainerStyle","left","right","styles","container","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["import PropTypes from 'prop-types';\nimport createReactClass from 'create-react-class';\nimport _ from 'lodash';\nimport { InteractionManager, ViewPropTypes } from '../../utils';\nconst React = require('react');\nconst { Component } = React;\nconst ReactNative = require('react-native');\nconst {\n  Dimensions,\n  View,\n  Animated,\n  ScrollView,\n  StyleSheet,\n  Platform\n} = ReactNative;\nconst TimerMixin = require('react-timer-mixin');\n\nconst SceneComponent = require('./SceneComponent');\nconst { DefaultTabBar } = require('./DefaultTabBar');\nconst { ScrollableTabBar } = require('./ScrollableTabBar');\n\nconst ScrollableTabView = createReactClass({\n  mixins: [TimerMixin],\n  statics: {\n    DefaultTabBar,\n    ScrollableTabBar\n  },\n\n  propTypes: {\n    tabBarPosition: PropTypes.oneOf([\n      'top',\n      'bottom',\n      'overlayTop',\n      'overlayBottom'\n    ]),\n    initialPage: PropTypes.number,\n    page: PropTypes.number,\n    onChangeTab: PropTypes.func,\n    onScroll: PropTypes.func,\n    renderTabBar: PropTypes.any,\n    style: ViewPropTypes.style,\n    contentProps: PropTypes.object,\n    scrollWithoutAnimation: PropTypes.bool,\n    locked: PropTypes.bool,\n    prerenderingSiblingsNumber: PropTypes.number\n  },\n\n  getDefaultProps() {\n    return {\n      tabBarPosition: 'top',\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0\n    };\n  },\n\n  getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      gotNextPage: false,\n      isClicked: false,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get('window').width,\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage })\n    };\n  },\n\n  componentDidMount() {\n    const scrollFn = () => {\n      if (this.scrollView) {\n        this.state.scrollValue.setValue(this.props.initialPage);\n      }\n    };\n    InteractionManager.runAfterInteractions(scrollFn);\n    // because of contentOffset is not working on Android\n    setTimeout(() => {\n      if (this.scrollView) {\n        this.scrollView.scrollTo({\n          x: this.props.initialPage * this.state.containerWidth,\n          animated: false,\n        });\n      }\n    });\n  },\n\n  UNSAFE_componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({\n        page: this.state.currentPage,\n        children: props.children\n      });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n\n  goToPage(pageNumber, isClicked = false) {\n    const offset = pageNumber * this.state.containerWidth;\n    this.setState({ isClicked: isClicked }, () => {\n      if (this.scrollView) {\n        this.scrollView.scrollTo({\n          x: offset,\n          y: 0,\n          animated: !this.props.scrollWithoutAnimation,\n        });\n      }\n      const currentPage = this.state.currentPage;\n      this.updateSceneKeys({\n        page: pageNumber,\n        callback: this._onChangeTab.bind(this, currentPage, pageNumber),\n      });\n    })\n  },\n\n  renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    }\n    return <DefaultTabBar {...props} />;\n  },\n\n  updateSceneKeys({\n    page,\n    children = this.props.children,\n    callback = () => {}\n  }) {\n    const newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children\n    });\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  },\n\n  newSceneKeys({\n    previousKeys = [],\n    currentPage = 0,\n    children = this.props.children\n  }) {\n    const newKeys = [];\n    this._children(children).forEach((child, idx) => {\n      const key = this._makeSceneKey(child, idx);\n      if (\n        this._keyExists(previousKeys, key) ||\n        this._shouldRenderSceneKey(idx, currentPage)\n      ) {\n        newKeys.push(key);\n      }\n    });\n    return newKeys;\n  },\n\n  _shouldRenderSceneKey(idx, currentPageKey) {\n    const numOfSibling = this.props.prerenderingSiblingsNumber;\n    return (\n      idx < currentPageKey + numOfSibling + 1 &&\n      idx > currentPageKey - numOfSibling - 1\n    );\n  },\n\n  _keyExists(sceneKeys, key) {\n    return sceneKeys.find(sceneKey => key === sceneKey);\n  },\n\n  _makeSceneKey(child, idx) {\n    return `${child.props.heading}_${idx}`;\n  },\n\n  renderScrollableContent() {\n    const scenes = this._composeScenes();\n    return (\n      <ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        keyboardShouldPersistTaps=\"handled\"\n        contentOffset={{\n          x: this.props.initialPage * this.state.containerWidth\n        }}\n        ref={scrollView => {\n          this.scrollView = scrollView;\n        }}\n        onScroll={this._optimisticRender}\n        onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={!this.props.locked}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n        keyboardDismissMode=\"on-drag\"\n        {...this.props.contentProps}\n      >\n        {scenes}\n      </ScrollView>\n    );\n  },\n\n  _composeScenes() {\n    return this._children().map((child, idx) => {\n      const key = this._makeSceneKey(child, idx);\n      return (\n        <SceneComponent\n          key={child.key}\n          shouldUpdated={this._shouldRenderSceneKey(\n            idx,\n            this.state.currentPage\n          )}\n          style={{ width: this.state.containerWidth }}\n        >\n          {this._keyExists(this.state.sceneKeys, key) ? (\n            child\n          ) : (\n            <View heading={child.props.heading} />\n          )}\n        </SceneComponent>\n      );\n    });\n  },\n\n  _onMomentumScrollBeginAndEnd(e) {\n    const offsetX = e.nativeEvent.contentOffset.x;\n    const page = Math.round(offsetX / this.state.containerWidth);\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n  // function that optimistically renders the tab based on scrolling\n  _optimisticRender(e) {\n    const { currentPage, containerWidth, isClicked, gotNextPage } = this.state\n    // overall offset\n    const offsetX = e.nativeEvent.contentOffset.x;\n    // offset in reference to screen (to get the scene it should scroll to)\n    const currentPageOffset = offsetX / containerWidth\n    // change in page\n    const deltaX = currentPageOffset - currentPage\n    // if there is a change (but not > 1 whole screen) and is not a click and the\n    // next page has not already been set to the current page\n    if(Math.abs(deltaX) > 0 && Math.abs(deltaX) < 1 && !isClicked && !gotNextPage) {\n      // set the next page and scroll to it\n      this.setState({ gotNextPage: true }, () => {\n        const nextPage = deltaX > 0 ? currentPage + 1 : currentPage - 1\n        this._updateSelectedPage(nextPage)\n      })\n    }\n    // if we are done scrolling, reset isClicked & gotNextPage\n    if(!deltaX) {\n      this.setState({ isClicked: false, gotNextPage: false })\n    }\n    this._updateScrollValue(offsetX / this.state.containerWidth)\n  },\n\n  _updateSelectedPage(nextPage) {\n    let localNextPage = nextPage;\n    if (typeof localNextPage === 'object') {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage)\n    });\n  },\n\n  _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage\n    });\n  },\n\n  _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n\n  _handleLayout(e) {\n    const { width } = e.nativeEvent.layout;\n\n    if (\n      !width ||\n      width <= 0 ||\n      Math.round(width) === Math.round(this.state.containerWidth)\n    ) {\n      return;\n    }\n    this.setState({ containerWidth: width });\n    this.requestAnimationFrame(() => {\n      this.goToPage(this.state.currentPage);\n    });\n  },\n\n  _children(children = this.props.children) {\n    return React.Children.map(children, child => child);\n  },\n\n  render() {\n    const overlayTabs =\n      this.props.tabBarPosition === 'overlayTop' ||\n      this.props.tabBarPosition === 'overlayBottom';\n    const tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(child => child.props.heading),\n      tabStyle: this._children().map(child => child.props.tabStyle),\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\n      textStyle: this._children().map(child => child.props.textStyle),\n      activeTextStyle: this._children().map(\n        child => child.props.activeTextStyle\n      ),\n      tabHeaderStyle: this._children().map(child =>\n        _.get(child.props.heading.props, 'style', undefined)\n      ),\n      disabled: this._children().map(child => child.props.disabled),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n    if (this.props.tabContainerStyle) {\n      tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\n    }\n    if (overlayTabs) {\n      tabBarProps.style = {\n        position: 'absolute',\n        left: 0,\n        right: 0,\n        [this.props.tabBarPosition === 'overlayTop' ? 'top' : 'bottom']: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.7)'\n      };\n    }\n\n    return (\n      <View\n        style={[styles.container, this.props.style]}\n        onLayout={this._handleLayout}\n      >\n        {(this.props.tabBarPosition === 'top' ||\n          this.props.tabBarPosition === 'overlayTop') &&\n          this.renderTabBar(tabBarProps)}\n        {this.renderScrollableContent()}\n        {(this.props.tabBarPosition === 'bottom' ||\n          this.props.tabBarPosition === 'overlayBottom') &&\n          this.renderTabBar(tabBarProps)}\n      </View>\n    );\n  }\n});\n\nexport default ScrollableTabView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  scrollableContentAndroid: {\n    flex: 1\n  }\n});\n"]}